# Инструкция по использованию API

## Получение списка категорий

### Endpoint

```
GET /api/categories
```

### Аутентификация

Для доступа к API необходимо использовать токен, который можно получить в административной панели в разделе "Настройки" -> "API Ключи".

### Как использовать в HTTPie

1. Базовая команда:

```bash
http GET http://localhost:8000/api/categories x-api-token:"ВАШ-ТОКЕН"
```

Пример использования с реальным токеном:

```bash
http GET http://localhost:8000/api/categories x-api-token:"qPiytZmIqRYz1L1Ji0JRyZq4jFZQ0woiJXmuyRaIB61RnIyymHSMNnSyfHGQURh3"
```

Важные замечания при использовании HTTPie:

-   Используйте маленькие буквы для заголовка: `x-api-token` (не X-API-Token)
-   Не ставьте пробел между названием заголовка и его значением
-   Значение токена должно быть в кавычках
-   Используйте GET большими буквами

### Как использовать в Postman

1. Откройте Postman
2. Создайте новый запрос:

    - Метод: GET
    - URL: http://localhost:8000/api/categories

3. Добавьте заголовок для аутентификации:

    - В разделе "Headers" добавьте новый заголовок:
        - Key: `X-API-Token`
        - Value: [ваш токен из админ-панели]

4. Отправьте запрос

### Пример ответа

```json
{
    "success": true,
    "data": [
        {
            "id": 1,
            "name": "Название категории",
            "slug": "nazvanie-kategorii",
            "image_path": "путь/к/изображению.jpg"
        }
    ]
}
```

### Возможные ошибки и их решение

1. HTTP 401 Unauthorized

```json
{
    "error": "API token required"
}
```

Решение:

-   Проверьте, что заголовок токена указан правильно
-   В HTTPie используйте `x-api-token` (маленькими буквами)
-   В Postman используйте `X-API-Token`

2. HTTP 401 Unauthorized

```json
{
    "error": "Invalid API token"
}
```

Решение:

-   Проверьте правильность токена в админ-панели
-   Создайте новый токен, если текущий не работает
-   Убедитесь, что между названием заголовка и значением нет пробела

### Примечания

-   Токены являются постоянными и не имеют срока действия
-   Каждый запрос с токеном обновляет время его последнего использования
-   Результаты запроса кэшируются на 1 час для повышения производительности
-   При обновлении категорий через админ-панель кэш автоматически очищается
